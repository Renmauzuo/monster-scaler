{"version":3,"file":"monsters.min.js","sources":["src/scripts/monsters.js"],"sourcesContent":["var monsterStats;\r\n\r\n$(function () {\r\n    populateSelect(monsterList, '#creature');\r\n    deserializeQuery();\r\n\r\n    if ($('#wild-shape')[0].checked) {\r\n        $('#wild-shape-wrapper').show();\r\n    }\r\n\r\n\r\n    $('#wild-shape').on('change', function () {\r\n        if ($(this)[0].checked) {\r\n            $('#wild-shape-wrapper').slideDown();\r\n        } else {\r\n            $('#wild-shape-wrapper').slideUp();\r\n        }\r\n    });\r\n\r\n    //Pretty much any input change means a recalculation\r\n    $('input,select').on('change', calculateSelectedMonster);\r\n\r\n    calculateSelectedMonster();\r\n\r\n});\r\n\r\n/**\r\n * Scales monster stats based on the selected template and challenge rating.\r\n */\r\nfunction calculateSelectedMonster() {\r\n    let monsterID = $('#creature').val();\r\n    let targetCR = $('#target-cr').val();\r\n    let wildShape = $('#wild-shape')[0].checked;\r\n    let customName = $('#name').val();\r\n    let customGender = parseInt($('#gender').val());\r\n\r\n    //Gather up options to pass to the calculator\r\n    let options = {};\r\n    if ($('#variant').is(':visible')) {\r\n        options.variant = $('#variant').val();\r\n    }\r\n    if ($('#race-select').is(':visible')) {\r\n        options.race = $('#race-select').val();\r\n    }\r\n\r\n    //Generate a direct link to this specific creature and stat set\r\n    let directLink = location.toString().replace(location.search, \"\");\r\n    directLink += '?' + serializeForm($('#monster-form'));\r\n    $('#direct-link').attr('href', directLink);\r\n\r\n    monsterStats = scaleMonster(monsterID, targetCR, options);\r\n\r\n    //Apply any customizations to the derived statblock\r\n    if (customGender) {\r\n        monsterStats.gender = customGender;\r\n    }\r\n\r\n    if (customName) {\r\n        //If there's a custom name assign that, but hang onto the original name\r\n        monsterStats.defaultName = monsterStats.name;\r\n        monsterStats.name = customName;\r\n        $('#npc-wrapper').show();\r\n        monsterStats.unique = $('#unique-npc').is(':checked');\r\n    } else {\r\n        $('#npc-wrapper').hide();\r\n    }\r\n\r\n    //Apply wildshape modifiers if any\r\n    if (wildShape) {\r\n        //Override int, wis, and cha if this is a wild shape\r\n        let wildShapeStats = {\r\n            int: $('#player-int').val(),\r\n            wis: $('#player-wis').val(),\r\n            cha: $('#player-cha').val()\r\n        }\r\n        if ($('#ws-resists').val().length) {\r\n            wildShapeStats.resistances = $('#ws-resists').val();\r\n        }\r\n        if ($('#ws-immunities').val().length) {\r\n            wildShapeStats.immunities = $('#ws-immunities').val();\r\n        }\r\n        if ($('#magic-attacks')[0].checked) {\r\n            wildShapeStats.traits = {\r\n                magicAttacks : traits.magicAttacks\r\n            }\r\n        }\r\n        monsterStats = mergeObjects(monsterStats, wildShapeStats);\r\n        monsterStats.proficiency = averageStats[$('#player-level').val()].proficiency;\r\n        monsterStats.wildShape = wildShape;\r\n        monsterStats.bonusArmor += parseInt($('#ws-ac-bonus').val());\r\n\r\n    }\r\n\r\n    //Once we have all the stats populate the statblock:\r\n    renderStatblock(monsterStats);\r\n\r\n}\r\n"],"names":["monsterStats","$","populateSelect","monsterList","deserializeQuery","checked","show","on","slideDown","slideUp","calculateSelectedMonster","monsterID","val","targetCR","wildShape","customName","customGender","parseInt","options","is","variant","race","directLink","location","toString","replace","search","serializeForm","attr","scaleMonster","gender","defaultName","name","unique","hide","wildShapeStats","int","wis","cha","length","resistances","immunities","traits","magicAttacks","mergeObjects","proficiency","averageStats","bonusArmor","renderStatblock"],"mappings":"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"}